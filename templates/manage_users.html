{# templates/manage_users.html #}
{% extends "layout.html" %}
{% set active = 'manage-users' %}

{% block title %}ì§ì› ê´€ë¦¬{% endblock %}

{% block content %}
  <div class="header">
    <h2>ğŸ‘¥ ì§ì› ê´€ë¦¬</h2>
    <a href="{{ url_for('admin_vacation') }}" class="btn">â† ê´€ë¦¬ì í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</a>
  </div>

  <div class="content-container">
    <!-- ì‹ ê·œ ì§ì› ë“±ë¡ -->
    <form method="POST" action="{{ url_for('add_user') }}" class="register-form">
      <h3>ì‹ ê·œ ì§ì› ë“±ë¡</h3>
      <div class="form-group">
        <label for="name">ì´ë¦„</label>
        <input type="text" id="name" name="name" required>
      </div>
      <div class="form-group">
        <label for="email">ì´ë©”ì¼</label>
        <input type="email" id="email" name="email" required>
      </div>
      <div class="form-group">
        <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
        <input type="text" id="password" name="password" required>
      </div>
      <div class="form-group">
        <label for="join_date">ì…ì‚¬ì¼</label>
        <input type="date" id="join_date" name="join_date" required>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn">ë“±ë¡</button>
      </div>
    </form>

    <!-- ì§ì› ëª©ë¡ í…Œì´ë¸” -->
    <div class="table-container">
      <table class="attendance-table">
        <thead>
          <tr>
            <th>ì´ë¦„</th>
            <th>ì´ë©”ì¼</th>
            <th>ì…ì‚¬ì¼</th>
            <th>ì…ì‚¬ì¼ ìˆ˜ì •</th>
            <th>ì‚­ì œ</th>
          </tr>
        </thead>
        <tbody>
          {% for u in users if u.role != 'admin' %}
            <tr>
              <form method="POST" action="{{ url_for('update_join_date') }}">
                <td>{{ u.name }}</td>
                <td>{{ u.email }}</td>
                <td>
                  <input type="hidden" name="id" value="{{ u.id }}">
                  <input type="date" name="join_date" value="{{ u.join_date }}">
                </td>
                <td>
                  <button type="submit" class="btn">ë³€ê²½</button>
                </td>
              </form>
              <td>
                <form method="POST"
                      action="{{ url_for('delete_user', user_id=u.id) }}"
                      onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                  <button type="submit" class="btn btn-danger">ì‚­ì œ</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
